<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: ubuntu | lianghaijun的博客]]></title>
  <link href="http://lianghaijun.com/blog/categories/ubuntu/atom.xml" rel="self"/>
  <link href="http://lianghaijun.com/"/>
  <updated>2014-01-19T16:20:09+08:00</updated>
  <id>http://lianghaijun.com/</id>
  <author>
    <name><![CDATA[seavers]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[linux repeat]]></title>
    <link href="http://lianghaijun.com/blog/2013-12-04-linux-repeat.html"/>
    <updated>2013-12-04T15:32:01+08:00</updated>
    <id>http://lianghaijun.com/blog/linux-repeat</id>
    <content type="html"><![CDATA[<p>linux下循环执行命令, 小工具, 觉得有用, 可收录</p>

<!--more-->


<p>```</p>

<pre><code>vi ~/.bash_aliases
</code></pre>

<p>```</p>

<p>```
repeat() {</p>

<pre><code>n=100
s=1

while true; do
    arg=$1
    if [ "$arg" == "-n" ]; then
        n=$2
        shift
        shift
    elif [ "$arg" == "-s" ]; then
        s=$2
        shift
        shift
    else
        break
    fi
done

while [ $((n -= 1)) -ge 0 ]; do
    "$@"
    sleep $s
done
</code></pre>

<p>}
```</p>

<p>```</p>

<pre><code>source ~/.bash_aliases
</code></pre>

<p>```</p>

<p>```</p>

<pre><code>repeat ls -l
repeat date
repeat iostat
repeat -n 3 curl 'http://www.lianghaijun.com'
repeat -n 3 -s 300 curl 'http://www.lianghaijun.com'
repeat -n 3 -s 0.5 sh -c "curl -I -s 'http://www.lianghaijun.com' | head -1"
</code></pre>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[utuntu group]]></title>
    <link href="http://lianghaijun.com/blog/2013-12-02-utuntu-group.html"/>
    <updated>2013-12-02T14:28:53+08:00</updated>
    <id>http://lianghaijun.com/blog/utuntu-group</id>
    <content type="html"><![CDATA[<p>linux用户管理中, 一直都有分组的概念, 然而我们总感觉使用场景较少, 其实是因为我们不了解</p>

<p>举个例子, 比如</p>

<ul>
<li> 在配置apache,nginx时, htdocs的目录权限, 遇到问题时, 我们总喜欢用 777,</li>
<li> 在使用samba, 或者 nfs 或者 ftp 时, 为避免复杂性, 也是 777</li>
<li> 是否希望将工作,生活的帐户体系分开, 是否希望, 使用不同的git环境</li>
</ul>


<!--more-->


<h2>基础</h2>

<ul>
<li> 每个用户都有一个主分组, 以及多个次分组, 即一个用户可以属于多个分组</li>
</ul>


<h2>常用命令</h2>

<p>分组常用的几个操作</p>

<p>查看自己的分组
<code>
seavers@seavers:/home/admin$ id
uid=1000(seavers) gid=1000(seavers) groups=1000(seavers),4(adm),24(cdrom),27(sudo),30(dip),46(plugdev),109(lpadmin),124(sambashare)
</code></p>

<p>查看所有的分组
```</p>

<pre><code>cat /etc/group
</code></pre>

<p>```</p>

<p>查看某个用户所在的分组
```</p>

<pre><code>groups seavers
</code></pre>

<p>```</p>

<p>增加用户到某个分组
```</p>

<pre><code>usermod seavers -a -G admin 
</code></pre>

<p>```</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[sed]]></title>
    <link href="http://lianghaijun.com/blog/2013-11-28-sed.html"/>
    <updated>2013-11-28T16:50:01+08:00</updated>
    <id>http://lianghaijun.com/blog/sed</id>
    <content type="html"><![CDATA[<p>sed是基于行进行文本替换的神器, 这里记录一些自己常用的功能</p>

<!--more-->


<p>直接替换
<code>
  cat data.txt | sed 's/abc/def/g'
</code></p>

<p>删掉空行
<code>
  cat data.txt | sed '/^$/d'
</code></p>

<p>删除掉第一行
<code>
  cat data.txt | sed '1d'
</code></p>

<p>删除掉每行的第一个字符
<code>
  cat data.txt | sed 's/^.//g'
</code></p>

<p>还有一些从<a href="http://baiqiuyi.com/linux/review-sed-command-for-unix-shell-book.html">其它地方</a>拷贝过来的
<code>
sed '1,3d' file //删除1-3行
sed '/[Aa]bc/p' file //打印包含Abc或者abc的行
sed '/ABC/d' //删除包含ABC的行
sed '/ABC/!d' //不删除包含ABC的行
sed '5,$d' //从第五行到最后一行全部删除
sed 1q  //显示第一行
sed 's/$/.../g' //每行的最后面添加 ...
sed 's/d.(sk)/1&amp;/g' //满足d*sk的单词,在单词前添加sk
sed 's/&lt;[^&gt;]*&gt;//g' //去除html标签
sed '/ABC/a123' //在包含ABC的行后面添加一行数值为123的行
sed '/ABC/i123' //跟a不同的是i是插入当前行的前面
sed '/ABC/c123' //包含ABC的行将更改为123
sed '/ABC/{n;s/123/ABC/g}' //精确匹配包含ABC的下一行,将123全部替换成ABC
sed '/ABC/{s/A/a/}' //在包含ABC的行将A替换成a
sed -e '/ABC/h' -e '$g' //将包含ABC的行复制,在最后一行添加.
sed -e '/ABC/{h;d}' -e '/123/G' //将包含ABC的行复制并删除,在包含123的行后添加.
g等于在当前行覆盖,G是在符合条件的行后新增加一行.
sed 's/^/ /g' //每行前面增加一个空格
sed 's/.(.)$/*1/' //将倒数第二位换成*
sed '/ABC/!s/1/*/g' //在不包含ABC的行里,将所有的1替换成*
sed 's/1|2|3/*/g' //在GNU里将不管是1或2或者是3替换成*
</code></p>

<p>还有这个
<a href="http://henter.me/post/sed-notes.html">http://henter.me/post/sed-notes.html</a>
<a href="http://blog.csdn.net/hepeng597/article/details/11269387">http://blog.csdn.net/hepeng597/article/details/11269387</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[wget 整站下载]]></title>
    <link href="http://lianghaijun.com/blog/2013-11-26-1980761.html"/>
    <updated>2013-11-26T10:22:00+08:00</updated>
    <id>http://lianghaijun.com/blog/1980761</id>
    <content type="html"><![CDATA[<p>下载整站
<code>
wget -r -nv --restrict-file-names=nocontrol http://seavers.iteye.com/
</code></p>

<p>下载时可以加 -np, 不下载父目录
<code>
wget -r -nv --restrict-file-names=nocontrol -np http://seavers.iteye.com/blog/
</code></p>

<p>下载时, 加入断点续传
<code>
wget -r -nv -c --restrict-file-names=nocontrol http://seavers.iteye.com/
</code></p>

<ul>
<li><p>&mdash;restrict-file-names=nocontrol 用来解决中文乱码问题</p></li>
<li><p><a href="http://aotee.com/using-wget-recursive-download-the-entire-station">http://aotee.com/using-wget-recursive-download-the-entire-station</a></p></li>
<li><a href="http://www.cnblogs.com/lybeta/archive/2012/05/23/2514759.html">http://www.cnblogs.com/lybeta/archive/2012/05/23/2514759.html</a></li>
<li><a href="http://blog.csdn.net/flyskywhy/article/details/7777972">http://blog.csdn.net/flyskywhy/article/details/7777972</a></li>
<li><a href="http://www.butian.org/knowledge/linux/254.html">http://www.butian.org/knowledge/linux/254.html</a></li>
</ul>

]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[ubuntu ipconfig]]></title>
    <link href="http://lianghaijun.com/blog/2013-11-06-1972028.html"/>
    <updated>2013-11-06T13:45:00+08:00</updated>
    <id>http://lianghaijun.com/blog/1972028</id>
    <content type="html"><![CDATA[<p>sudo vi /sbin/ipconfig</p>

<p>```</p>

<h1>! /bin/bash</h1>

<p>for word in <code>ifconfig eth0 | grep "inet addr" | sed  's/          inet addr/addr/g'</code>; do echo $word | sed &rsquo;s/:/\t/g'; done
route -n | awk &lsquo;/UG/ {printf &ldquo;gateway    %-21s %s\n&rdquo;, $2,$8}&rsquo; ;
grep nameserver /etc/resolv.conf ;
```</p>

<p>```
sudo chmod +x /sbin/ipconfig</p>

<p>ipconfig</p>

<p>```</p>

<hr />

<p>待改进</p>

<ul>
<li>支持eth0 与 wlan0</li>
<li>支持dnsmasq</li>
</ul>

]]></content>
  </entry>
  
</feed>
